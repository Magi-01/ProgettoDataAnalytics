
---
title: "Analisi house price"
output: html_document
---

# Importazione delle librerie

``` {r}
library(ggplot2)

plot_theme = theme_minimal() +
    theme(
        plot.title = element_text(face = "bold", hjust = 0.5),
        plot.subtitle = element_text(hjust = 0.5),
        axis.line = element_line(color = "darkgrey"),
        axis.ticks = element_line(color = "black"))
theme_set(plot_theme)
```

# Importazione dei dati

``` {r}
HP <- read.csv2(
    "./dataset.csv",
    sep = ",", 
    stringsAsFactors = T,
    row.names=1)

attach(HP)
```

# Distribuzione dei Prezzi delle Case

```{r}
SalePrice.summary <- summary(SalePrice)

print(SalePrice.summary)
```

```{r}
ggplot(HP, aes(x = SalePrice)) +
    geom_density() +
    xlab("Prezzo di vendita") +
    ylab("Densità") +
    geom_vline(aes(xintercept = SalePrice.summary["1st Qu."], colour = "1° Quantile"), linetype = "dashed") +
    geom_vline(aes(xintercept = SalePrice.summary["Mean"], colour = "Media"), linetype = "dashed") +
    geom_vline(aes(xintercept = SalePrice.summary["Median"], colour = "Mediana"), linetype = "dashed") +
    geom_vline(aes(xintercept = SalePrice.summary["3rd Qu."], colour = "3° Quantile"), linetype = "dashed") +
    labs(colour = "Statistiche") +
    scale_color_manual(labels = c("1° Quantile", "3° Quantile", "Media", "Mediana"), values = c("green", "darkgreen", "red", "blue"))
```
```{r}
ggplot(HP, aes(x = SalePrice)) +
    geom_boxplot() +
    xlab("Prezzo di vendita")
```

Possiamo dedurre che la distribuzione è positivamente asimetrica e che la maggior parte del prezzo di vendita è compresa tra 129975 e 214000, essendo rispettivamente il 1° e il 3° quantile.
Sia può dedurre che sono una piccola parte delle case vendute siano ville di lusso, case lussuose o immobili di alto valore, ma la maggior parte del mercato immobiliare di concentri sulla vendita di piccoli o medi immobili.

# Matrice di correlazione

Prima di tutto identifico le variabili su cui ha senso applicare la matrice di correlazione
```{r}
Heapmap.vars <- c("MSSubClass", "MSZoning", "LotFrontage", "LotArea", "LotShape", "LotConfig", "Neighborhood", "BldgType", "HouseStyle", "OverallQual", "OverallCond", "YearBuilt", "YearRemodAdd", "Exterior1st", "ExterQual", "ExterCond", "Foundation", "BsmtQual", "BsmtCond", "BsmtExposure", "BsmtFinSF1", "BsmtFinSF2", "TotalBsmtSF", "HeatingQC", "X1stFlrSF", "X2ndFlrSF", "GrLivArea", "FullBath", "HalfBath", "BedroomAbvGr", "KitchenQual", "TotRmsAbvGrd", "GarageType", "GarageCars", "GarageArea", "GarageQual", "GarageCond", "OpenPorchSF", "EnclosedPorch", "ScreenPorch", "Fence", "MiscFeature", "MiscVal", "MoSold", "YrSold", "SalePrice")
```

E trasformo le variabili opportune in factor:
```{r, message = F}
for (l in c("OverallQual", "OverallCond")) {
    HP[, l] <- factor(HP[, l], levels = 1:10, labels = 1:10)
}

for (f in c("ExterQual", "ExterCond", "BsmtQual", "BsmtCond", "HeatingQC", "KitchenQual", "GarageQual", "GarageCond")) {
    HP[, f] <- factor(
        HP[, f],
        levels = c("Po", "Fa", "TA", "Gd", "Ex"),
        labels = c("Poor", "Fair", "Average", "Good", "Excellent"))
}

attach(HP)
```

# Analisi dell'Età delle Case
<!--b) Esiste una relazione tra l'area e l'età della casa?
c) Confronto delle variabili indipendenti con ANOVA
d) Chi ha pagato di più in media per età -->

```{r}
current_year <- as.integer(format(Sys.Date(), "%Y"))

HouseAge <- current_year - YearBuilt

```

Ottenuto il vettore delle età delle case, procedo a metterlo in relazione con il SalePrice trimite uno scatter plot.

```{r}
ggplot(data.frame(HouseAge, SalePrice), aes(x = HouseAge, y = SalePrice)) +
    geom_point()
```


# Stato delle Condizioni della Casa
<!-- a) Trasformazione dello stato della casa in variabili categoriche
b) Condizioni della casa vs Prezzi
c) Impatto delle Ristrutturazioni sul Prezzo
d) Distribuzione dei Prezzi (Ristrutturata vs Non Ristrutturata) -->

# Analisi Regionale:
<!-- a) Costruzione di una tabella di contingenza
b) Prezzo medio della casa per regione
c) Prezzo medio per regione in base alle condizioni della casa -->

# Algoritmi di Apprendimento Non Supervisionato:
<!-- a) Esecuzione di Cluster Manualmente
b) Clustering con K-Means
c) Clustering Gerarchico -->

# Correlazioni
<!-- a) Correlazioni e Analisi Bivariata
b) Pre-elaborazione dei dati e utilizzo dei Pipeline -->

# Statistiche
<!-- a) Modelli Lineari e Termini
b) Gestione della Collinearità
c) Importanza dell'aggiunta dello stato di ristrutturazione al nostro modello
d) Gestione della Asimmetria
e) Utilizzo del nostro modello in una distribuzione simmetrica -->
